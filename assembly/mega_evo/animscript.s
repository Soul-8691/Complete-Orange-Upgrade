	.global mega_animation_script

	.equ ANIM_XX, 0x27a3
	.equ ANIM_YY, 0x281b
	.equ ANIM_ZZ, 0x27d8

	.align 2
	anim_rainbow_y: 
	.short ANIM_XX, ANIM_XX
	.byte 0x50, 0xcb, 0x3a, 0x8, 0x40, 0x2a, 0x3e, 0x8, 0x0, 0x0, 0x0, 0x0
	.byte 0x54, 0x2a, 0x3e, 0x8, 0x89, 0x23, 0xa, 0x8

	.align 2
	anim_rainbow_x:
	.byte 0x2
	.long anim_rainbow_y
	.byte 0x2, 0x3, 0x28, 0x0, 0xF6, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0xDD, 0xFF, 0xF6, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0xF, 0x0, 0xD8, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0xF6, 0xFF, 0xE0, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0x19, 0x0, 0xEC, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0xD8, 0xFF, 0xEC, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0x2
	.word anim_rainbow_y
	.byte 0x2, 0x3, 0x5, 0x0, 0xD8, 0xFF, 0xD, 0x0, 0x4, 0x3
	
	.byte 0xf

	.align 2	
	anim_mega_stone_x:
	.short ANIM_YY, ANIM_YY
	.byte 0xc0, 0xcb, 0x3a, 0x8, 0xf0, 0x1c, 0x23, 0x8, 0x0, 0x0, 0x0, 0x0
	.byte 0x44, 0x71, 0x3e, 0x8, 0x9d, 0x5d, 0x7, 0x8

	.align 2
	anim_mega_symbol_x:
	.short ANIM_ZZ, ANIM_ZZ
	.byte 0xf8, 0xca, 0x3a, 0x8, 0xf0, 0x1c, 0x23, 0x8, 0x0, 0x0, 0x0, 0x0
	.byte 0xfc, 0x1c, 0x23, 0x8, 0xd5, 0x67, 0xb, 0x8

	.align 2
	mega_animation_script_data:
	@ Buffer particles
	.byte 0
	.short ANIM_XX
	.byte 0
	.short ANIM_YY
	.byte 0
	.short ANIM_ZZ
	
	@ Charge Rainbow Particles
	.byte 0xa, 0x2, 0xc, 0xc, 0x8, 0x1c, 0x85, 0x0, 0xc0, 0xd, 0x3, 0x3, 0xdd, 0x9b, 0xb, 0x8
	.byte 0x2, 0x6, 0x2, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0xb, 0x0, 0xff, 0x2f
	.byte 0xE
	.word anim_rainbow_x
	.byte 0xE
	.word anim_rainbow_x
	.byte 0xE
	.word anim_rainbow_x
	.byte 0x5, 0xB
	
	@ Load Mega Stone
	.byte 0x2 @ leftover from previous?
	.byte 0xd
	.byte 0x4, 0x0
	.byte 0x17
	.byte 0xa, 0x0 
	.byte 0xc, 0xc, 0x8 @ set_blend
	.byte 0x19, 0xc2, 0x0, 0xc0 @ play sound I guess
	.byte 0x2 @ init_template
	.word anim_mega_stone_x @ ...
	.byte 0x29, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 @ ...
	
	@ Whiteout Screen	
	.byte 0x4, 0x14 @ wait
	.byte 0x3, 0x3d, 0xa8, 0xb, 0x8, 0x5, 0x5, 0x5, 0x0, 0x2, 0x0, 0x0, 0x0 @ something_template
	.byte 0x10, 0x0, 0xff, 0xff @ ...
	.byte 0x3, 0x21, 0xaa, 0xb, 0x8, 0x5, 0x5 @ something_template
	.short ANIM_YY @ ...
	.byte 0x2, 0x0, 0x0, 0x0 @ ...
	.byte 0x10, 0x0, 0xff, 0xff @ ...
	.byte 0x5 @ wait
	.byte 0x3, 0x21, 0xaa, 0xb, 0x8, 0x5 @ something_template
	.byte 0x0
	
	@ Yay Update Sprite
	.byte 3
	 	.word task_ma_swap_sprites + 1 @ C function in anim_script
	.byte 2, 0
	@.byte 0xb, 0x2 @ Trigger refresh
	@.byte 3
	@.word 0x80BAA4C + 1
	@.byte 3, 0
	
	@ Return Screen
	@.byte 0x5 @ wait
		@
	.byte 0x3, 0x3d, 0xa8, 0xb, 0x8, 0x5, 0x5, 0x5, 0x0, 0x2, 0x0, 0x10, 0x0 @ something_template
	.byte 0x0, 0x0, 0xff, 0xff @ ...
	@ .byte 0x1, 0x0, 0x5 @ ???
	@.byte 0x0, 0xe, 0x0 @ load_graphics
	.byte 0x5 @ wait
	
	.byte 0x3, 0xb5, 0x94, 0xb, 0x8, 0x5, 0x3, 0x1, 0x0, 0x5, 0x0, 0xe, 0x0
	
	@ Play cry of new species
	.byte 0x3
	.word task_ma_cry + 1
	.byte 1, 2
	.short 0, 0xFF
	
	.byte 0x5, 0xb
	@ Show Mega Evolution Symbol
	.byte 0x2
	@ 0x4, 0x1, 0xa, 0x3, 0x19, 0x72, 0x0, 0x3f
	.byte 0x2
	.word anim_mega_symbol_x
	.byte 0x82, 0x0
	.byte 0x5, 0xb, 0xd
	

	
	@ End
	.byte 0x8

	@ C function requires a pointer to the script data
	.align 2	
	mega_animation_script: .long mega_animation_script_data
